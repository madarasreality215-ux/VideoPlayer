<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Oathbound Archives ‚Äî Login</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&display=swap" rel="stylesheet">

<style>
body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
  background: #0B1220;
  font-family: 'Cinzel', serif;
}
.background-layer {
  position: fixed;
  inset: 0;
  background: url("https://i.postimg.cc/wjqh586L/The-fool.jpg") center/cover no-repeat;
  filter: brightness(0.4) contrast(1.1) blur(4px);
  opacity: 0.5;
  z-index: -3;
}
.background-overlay {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at center, rgba(15,15,20,0.35) 0%, rgba(10,10,15,0.6) 100%);
  z-index: -2;
}
.card-auth {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(42, 42, 46, 0.85);
  border-radius: 14px;
  box-shadow: inset 0 0 25px rgba(160,160,255,0.15), 0 0 25px rgba(255,255,255,0.08);
  padding: 26px 32px;
  width: 380px;
  color: #e8e8ea;
  z-index: 10;
  opacity: 0;
  animation: fadeInBox 1s ease forwards;
  border: 1px solid rgba(200,200,210,0.3);
}
@keyframes fadeInBox {
  from { opacity: 0; transform: translate(-50%, -50%) scale(0.97); }
  to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}
.card-auth input, .card-auth button {
  width: 100%;
  box-sizing: border-box;
  margin-top: 10px;
  padding: 12px 14px;
  border-radius: 10px;
  border: 1px solid rgba(200,200,210,0.25);
  background: rgba(30,30,35,0.8);
  color: #f2f3f7;
  outline: none;
  transition: box-shadow 200ms ease, transform 200ms ease, background 200ms ease;
}
.card-auth input::placeholder { color: #aeb0b7; }
.card-auth input:focus, .card-auth button:hover {
  box-shadow: 0 0 16px rgba(200,180,255,0.35);
  transform: translateY(-1px);
}
.card-auth button {
  background: linear-gradient(90deg, rgba(80,80,100,0.9), rgba(100,100,140,0.9));
  cursor: pointer;
  font-weight: 600;
  letter-spacing: 0.5px;
}
#firebaseStatus {
  text-align: center;
  margin-top: 12px;
  font-size: 0.85rem;
  color: #e0d8b0;
  opacity: 0.9;
  transition: opacity 1s ease;
}
#oathAcceptedOverlay {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.6);
  z-index: 9999;
}
#oathAcceptedOverlay .crest {
  text-align: center;
  color: #e8e6ff;
  font-family: Georgia, serif;
  letter-spacing: 1px;
  padding: 28px 36px;
  border: 2px solid rgba(200,200,210,0.35);
  border-radius: 16px;
  box-shadow: 0 0 30px rgba(200,200,210,0.25);
  background: radial-gradient(ellipse at center, rgba(23,27,40,0.95), rgba(10,12,18,0.95));
}
</style>
</head>
<body>

<div class="background-layer"></div>
<div class="background-overlay"></div>

<div class="card-auth">
  <h1 style="margin:0 0 8px 0;">Oathbound Archives</h1>
  <p style="margin:0 0 14px 0; opacity:.85;">Enter the Royal Gateway</p>
  <label for="email">Scroll of Identity</label>
  <input id="email" type="email" placeholder="Scroll of Identity" autocomplete="username">
  <label for="password" style="margin-top:10px;">Sigil Key</label>
  <input id="password" type="password" placeholder="Sigil Key" autocomplete="current-password">
  <button id="loginBtn" style="margin-top:12px;">Swear Thy Oath</button>
  <div id="loginMsg" style="margin-top:10px; font-size:0.9rem; opacity:.85;"></div>
  <div id="firebaseStatus">üïØÔ∏è Linking to Firebase Realm...</div>
</div>

<div id="oathAcceptedOverlay">
  <div class="crest">
    <h2>Oath Bound ‚Äì Access Granted</h2>
    <p style="margin:0;opacity:0.9;">Welcome to the Oathbound Archives</p>
  </div>
</div>

<!-- Firebase compat SDKs (aligned with main app) -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBH691ymS0uO7JejXC1MGFuhiIElD78UPY",
  authDomain: "personalplayer-c8d3b.firebaseapp.com",
  projectId: "personalplayer-c8d3b",
  storageBucket: "personalplayer-c8d3b.appspot.com",
  messagingSenderId: "396785312809",
  appId: "1:396785312809:web:02290950ec22a13165a838",
  measurementId: "G-2Q8W3GJF1S"
};

const statusEl = document.getElementById("firebaseStatus");
try {
  firebase.initializeApp(firebaseConfig);
  statusEl.textContent = "üîÆ Connection Established.";
  setTimeout(() => statusEl.style.opacity = "0", 3000);
} catch (err) {
  statusEl.textContent = "‚ö†Ô∏è Connection Failed.";
  console.error("Firebase init error:", err);
}

const email = document.getElementById("email");
const pass = document.getElementById("password");
const btn = document.getElementById("loginBtn");
const msg = document.getElementById("loginMsg");

if (btn) {
  btn.addEventListener("click", async () => {
    if (!firebase.auth) { msg.textContent = "The Gate of Fire is not yet open."; return; }
    try {
      await firebase.auth().signInWithEmailAndPassword(email.value, pass.value);
    } catch (err) {
      msg.textContent = "‚öîÔ∏è The Oath Was Denied ‚Äî Verify Thy Sigils and Try Again.";
    }
  });
}

firebase.auth().onAuthStateChanged((u) => {
  if (u) {
    const o = document.getElementById("oathAcceptedOverlay");
    o.style.display = "flex";
    setTimeout(() => { o.style.display = "none"; window.location.href = "index.html"; }, 1500);
  }
});
</script>
</body>
</html>
