[file name]: index.html
[file content begin]
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MediaTracker Pro - Your Ultimate Media Organizer</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#7c3aed">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="MediaTracker">
<link rel="apple-touch-icon" href="icons/icon-192x192.png">

<style>
  :root{
    --bg-light:#f3f4f6;
    --bg-dark:#0b1220;
    --card-light:#ffffff;
    --card-dark:#0f1724;
    --text-light:#0f1724;
    --text-dark:#e6eef9;
    --accent:#7c3aed;
    --accent-hover:#6d28d9;
    --muted:rgba(230,238,249,0.65);
    --root-folder-color: #10b981; /* New color for root folder */
    --root-folder-hover: #34d399; /* Hover color for root folder */
    --thumb-size:120px;
    --safe-area: env(safe-area-inset-bottom, 16px);
  }
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;margin:0;background:var(--bg-dark);color:var(--text-dark);transition:background .2s,color .2s}
  body.light{background:var(--bg-light);color:var(--text-light)}
  
  /* App container - COMPLETELY HIDDEN until authenticated */
  #appContainer{
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  #appContainer.authenticated{
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  /* Auth Screen Styles - ALWAYS SHOWN initially */
  #authScreen{
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-dark);
    color: var(--text-dark);
    transition: background .2s, color .2s;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
  }
  body.light #authScreen{
    background: var(--bg-light);
    color: var(--text-light);
  }
  
  /* Hide auth screen when authenticated */
  #authScreen.authenticated{
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }

  .auth-container{
    width: 90%;
    max-width: 400px;
    padding: 40px 0;
  }
  .auth-card{
    background: var(--card-dark);
    padding: 32px;
    border-radius: 16px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    text-align: center;
  }
  body.light .auth-card{
    background: var(--card-light);
  }
  .auth-logo{
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 8px;
    color: var(--accent);
  }
  .auth-subtitle{
    color: var(--muted);
    margin-bottom: 32px;
    font-size: 16px;
  }
  .auth-form{
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  .auth-form input{
    padding: 14px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.1);
    background: rgba(255,255,255,0.05);
    color: inherit;
    font-size: 16px;
    width: 100%;
  }
  body.light .auth-form input{
    border-color: rgba(0,0,0,0.1);
    background: rgba(0,0,0,0.05);
  }
  .auth-primary-btn{
    background: var(--accent);
    color: white;
    padding: 14px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-weight: 600;
    font-size: 16px;
    transition: background .2s;
    width: 100%;
  }
  .auth-primary-btn:hover{
    background: var(--accent-hover);
  }
  .auth-error{
    color: #ef4444;
    font-size: 14px;
    text-align: center;
    margin-top: 12px;
    display: none;
  }
  .auth-loading{
    display: none;
    text-align: center;
    margin-top: 16px;
  }

  /* FIXED FOLDER SECTION LAYOUT */
  .folder-creation {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 16px;
  }

  .folder-input-row {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  .folder-input-row input {
    flex: 1;
    padding: 8px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.04);
    background: transparent;
    color: inherit;
    font-size: 14px;
    min-width: 0; /* Prevents overflow */
  }

  .folder-select-row {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  /* UPDATED: Main Library dropdown styling to match others */
  .folder-select-row select {
    flex: 1;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.1);
    background: transparent;
    color: inherit;
    font-size: 14px;
    cursor: pointer;
    min-width: 0; /* Prevents overflow */
    transition: background 0.2s;
  }

  .folder-select-row select:hover {
    background: rgba(255,255,255,0.05);
  }

  .folder-select-row .btn {
    white-space: nowrap;
    flex-shrink: 0;
  }

  /* Mobile responsive for folder section */
  @media (max-width: 768px) {
    .folder-input-row,
    .folder-select-row {
      flex-direction: column;
    }
    
    .folder-input-row input,
    .folder-select-row select {
      width: 100%;
    }
  }

  /* ALL OTHER STYLES REMAIN EXACTLY THE SAME */
  header{display:flex;align-items:center;gap:12px;padding:12px 16px;background:var(--card-dark);position:sticky;top:0;z-index:100;}
  body.light header{background:var(--card-light)}
  h1{margin:0;font-size:18px}
  .controls{margin-left:auto;display:flex;gap:8px;align-items:center}
  .btn{background:var(--accent);color:white;padding:8px 10px;border-radius:8px;border:none;cursor:pointer;font-weight:600;transition:background .2s}
  .btn:hover{background:var(--accent-hover)}
  .ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 10px;border-radius:8px;color:inherit;cursor:pointer;transition:background .2s}
  .ghost:hover{background:rgba(255,255,255,0.05)}
  body.light .ghost{border-color:rgba(0,0,0,0.08)}
  body.light .ghost:hover{background:rgba(0,0,0,0.05)}
  
  .container{display:grid;grid-template-columns:320px 1fr;gap:16px;padding:16px;min-height:calc(100vh - 60px)}
  @media (max-width:960px){.container{grid-template-columns:1fr;}}
  @media (max-width:768px){.container{padding:12px;gap:12px;}}
  @media (max-width:480px){.container{padding:8px;gap:8px;}}
  
  .sidebar{background:var(--card-dark);padding:12px;border-radius:12px;min-height:60vh}
  body.light .sidebar{background:var(--card-light)}
  .main{background:var(--card-dark);padding:12px;border-radius:12px;min-height:60vh}
  body.light .main{background:var(--card-light)}

  .topbar{display:flex;gap:8px;align-items:center;margin-bottom:10px}
  input[type=search]{flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;font-size:14px}
  body.light input[type=search]{border-color:rgba(0,0,0,0.08)}

  .folders{display:flex;flex-direction:column;gap:8px;max-height:40vh;overflow:auto;padding-right:6px}
  .folder{display:flex;align-items:center;gap:8px;padding:8px;border-radius:10px;background:rgba(255,255,255,0.02);cursor:pointer;transition:background .2s}
  .folder:hover{background:rgba(255,255,255,0.05)}
  .folder .name{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .folder .count{font-size:12px;color:var(--muted)}
  
  /* Folder collapse/expand styles */
  .folder-header{display:flex;align-items:center;gap:8px;padding:8px;border-radius:10px;background:rgba(255,255,255,0.02);cursor:pointer;transition:background-color 0.2s}
  .folder-header:hover{background:rgba(255,255,255,0.05)}
  .folder-header .icon{transition:transform 0.2s;width:16px;height:16px;display:flex;align-items:center;justify-content:center}
  .folder-header.collapsed .icon{transform:rotate(-90deg)}
  .folder-content{overflow:hidden;transition:max-height 0.3s ease-out}
  .folder-content.collapsed{max-height:0}
  .nested-folder{margin-left:20px;border-left:1px solid rgba(255,255,255,0.1);padding-left:8px}
  body.light .nested-folder{border-left-color:rgba(0,0,0,0.1)}

  .videoList{display:flex;flex-direction:column;gap:8px;max-height:40vh;overflow:auto}
  .vitem{display:flex;gap:10px;align-items:center;padding:8px;border-radius:10px;background:rgba(255,255,255,0.02);cursor:pointer;transition:background .2s}
  .vitem:hover{background:rgba(255,255,255,0.05)}
  .vitem.dragging{opacity:0.5;background:rgba(124,58,237,0.2);transform:scale(0.95)}
  .vitem.drop-target{background:rgba(124,58,237,0.1);border:2px dashed var(--accent)}
  .folder.drop-target{background:rgba(124,58,237,0.1);border:2px dashed var(--accent)}
  .thumb{width:var(--thumb-size);height:calc(var(--thumb-size)*0.6);background:#000;border-radius:8px;overflow:hidden;flex-shrink:0}
  .thumb img{width:100%;height:100%;object-fit:cover}
  .meta{flex:1;min-width:0}
  .meta h3{margin:0;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .meta p{margin:4px 0 0 0;font-size:12px;color:var(--muted)}

  .viewer video{width:100%;height:auto;max-height:70vh;background:#000;border-radius:8px}
  .fields{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
  .fields input,.fields textarea,.fields select{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;font-size:14px;flex:1;min-width:150px}
  body.light .fields input,body.light .fields textarea,body.light .fields select{border-color:rgba(0,0,0,0.08)}
  .small{font-size:12px;color:var(--muted)}

  .folder-actions{display:flex;gap:8px;margin-top:8px}
  .collapse{opacity:0.8}
  .controls .btn-sm{padding:6px 8px;font-size:13px}

  /* Action Sections */
  .action-section{margin-top:16px;padding:12px;background:rgba(255,255,255,0.02);border-radius:8px;border:1px solid rgba(255,255,255,0.04)}
  body.light .action-section{background:rgba(0,0,0,0.02);border-color:rgba(0,0,0,0.08)}
  .action-section h3{margin:0 0 8px 0;font-size:14px;color:var(--accent)}
  .action-buttons{display:flex;flex-direction:column;gap:8px}
  .action-buttons .btn,.action-buttons .ghost{width:100%;justify-content:center;text-align:center}
  
  /* Mobile-specific styles - Enhanced for iOS/Android */
  .mobile-controls{display:none;position:fixed;bottom:0;left:0;right:0;background:var(--card-dark);padding:12px;border-top:1px solid rgba(255,255,255,0.1);z-index:100;padding-bottom: calc(12px + var(--safe-area))}
  body.light .mobile-controls{background:var(--card-light);border-top-color:rgba(0,0,0,0.1)}
  .mobile-controls-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  
  /* Media type indicators */
  .media-type-badge{background:var(--accent);color:white;padding:2px 6px;border-radius:4px;font-size:10px;font-weight:600}
  .media-type-photo{background:#10b981}
  .media-type-video{background:#7c3aed}
  
  /* Add Media Buttons */
  .add-media-buttons{display:flex;gap:8px;margin-top:8px}
  .add-media-buttons .btn{flex:1;min-width:0} /* Ensure equal width */
  
  /* Firebase sync status */
  .sync-status{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--muted);margin-top:8px}
  .sync-indicator{width:8px;height:8px;border-radius:50%;background:#10b981}
  .sync-indicator.syncing{background:#f59e0b;animation:pulse 1.5s infinite}
  .sync-indicator.error{background:#ef4444}
  @keyframes pulse{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}
  
  /* Upload Progress Styles */
  .upload-progress {margin-top: 12px; padding: 12px; background: rgba(255,255,255,0.02); border-radius: 8px; border: 1px solid rgba(255,255,255,0.04)}
  .progress-bar {width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden; margin-top: 8px}
  .progress-fill {height: 100%; background: var(--accent); transition: width 0.3s ease}
  .progress-text {font-size: 12px; color: var(--muted); margin-top: 4px}
  .duplicate-warning {background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.3); padding: 8px; border-radius: 6px; margin-top: 8px; font-size: 12px}
  
  /* Cloud Storage Styles - UPDATED */
  .cloud-storage-dropdown {position: relative; display: inline-block; width: 100%;}
  .cloud-storage-btn {width: 100%; padding: 10px; background: transparent; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: inherit; cursor: pointer; display: flex; align-items: center; justify-content: space-between; font-size: 14px;}
  .cloud-storage-btn:hover {background: rgba(255,255,255,0.05);}
  .cloud-dropdown-content {display: none; position: absolute; top: 100%; left: 0; right: 0; background: var(--card-dark); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 8px; z-index: 1000; margin-top: 4px;}
  .cloud-dropdown-content.show {display: block;}
  .cloud-option {padding: 10px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: background 0.2s;}
  .cloud-option:hover {background: rgba(255,255,255,0.05);}
  .cloud-option.mega {color: #D90007;}
  .cloud-option.local {color: #10b981;}
  .cloud-browser {margin-top: 12px; padding: 12px; background: rgba(255,255,255,0.02); border-radius: 8px; border: 1px solid rgba(255,255,255,0.04); display: none;}
  .cloud-browser.show {display: block;}
  .cloud-folder {padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px; margin-bottom: 4px;}
  .cloud-folder:hover {background: rgba(255,255,255,0.05);}
  .cloud-file {padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px; margin-bottom: 4px;}
  .cloud-file:hover {background: rgba(255,255,255,0.05);}
  .cloud-back {padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px; margin-bottom: 8px; color: var(--accent);}
  .cloud-back:hover {background: rgba(255,255,255,0.05);}

  /* URL Downloader - RESTRUCTURED */
  .url-downloader-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  
  .url-input-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  .url-input-group input {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.1);
    background: rgba(255,255,255,0.05);
    color: inherit;
    font-size: 14px;
  }
  
  .url-downloader-dropdown {
    position: relative;
    display: inline-block;
    width: 100%;
  }
  
  .url-downloader-btn {
    width: 100%;
    padding: 10px;
    background: transparent;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    color: inherit;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 14px;
  }
  
  .url-downloader-btn:hover {
    background: rgba(255,255,255,0.05);
  }
  
  .url-downloader-content {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--card-dark);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    padding: 8px;
    z-index: 1000;
    margin-top: 4px;
  }
  
  .url-downloader-content.show {
    display: block;
  }
  
  .url-option {
    padding: 10px;
    border-radius: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: background 0.2s;
  }
  
  .url-option:hover {
    background: rgba(255,255,255,0.05);
  }
  
  .url-download-btn {
    width: 100%;
    padding: 10px;
    background: var(--accent);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.2s;
  }
  
  .url-download-btn:hover {
    background: var(--accent-hover);
  }

  /* File Tools Dropdown Styles */
  .file-tools-dropdown {position: relative; display: inline-block; width: 100%;}
  .file-tools-btn {width: 100%; padding: 10px; background: transparent; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: inherit; cursor: pointer; display: flex; align-items: center; justify-content: space-between; font-size: 14px;}
  .file-tools-btn:hover {background: rgba(255,255,255,0.05);}
  .file-tools-content {display: none; position: absolute; top: 100%; left: 0; right: 0; background: var(--card-dark); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 8px; z-index: 1000; margin-top: 4px;}
  .file-tools-content.show {display: block;}
  .file-tool-option {padding: 10px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px; transition:background 0.2s;}
  .file-tool-option:hover {background: rgba(255,255,255,0.05);}

  /* Custom Modal Styles */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10000;
  }
  .modal-overlay.show {
    display: flex;
  }
  .modal {
    background: var(--card-dark);
    border-radius: 12px;
    padding: 24px;
    max-width: 400px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
  }
  body.light .modal {
    background: var(--card-light);
  }
  .modal h3 {
    margin: 0 0 16px 0;
    color: var(--accent);
  }
  .modal-buttons {
    display: flex;
    gap: 12px;
    margin-top: 20px;
    justify-content: flex-end;
  }
  .modal-buttons .btn {
    min-width: 80px;
  }

  /* Enhanced Video Player */
  .video-player-container {
    position: relative;
    background: #000;
    border-radius: 8px;
    overflow: hidden;
  }
  .video-controls {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0,0,0,0.7));
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    opacity: 0;
    transition: opacity 0.3s;
  }
  .video-player-container:hover .video-controls {
    opacity: 1;
  }
  .control-btn {
    background: none;
    border: none;
    color: white;
    font-size: 20px;
    cursor: pointer;
    padding: 8px;
  }
  .progress-container {
    flex: 1;
    height: 4px;
    background: rgba(255,255,255,0.3);
    border-radius: 2px;
    cursor: pointer;
    position: relative;
  }
  .progress-bar {
    height: 100%;
    background: var(--accent);
    border-radius: 2px;
    width: 0%;
  }
  .time-display {
    color: white;
    font-size: 14px;
    min-width: 100px;
    text-align: center;
  }

  /* File Conversion Tools */
  .conversion-tools {
    margin-top: 12px;
    padding: 12px;
    background: rgba(255,255,255,0.02);
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.04);
  }
  .conversion-options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    margin-top: 8px;
  }
  .conversion-option {
    padding: 10px;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    text-align: center;
    cursor: pointer;
    transition: background 0.2s;
  }
  .conversion-option:hover {
    background: rgba(255,255,255,0.05);
  }

  /* Install Prompt */
  .install-prompt {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: var(--accent);
    color: white;
    padding: 12px 16px;
    border-radius: 8px;
    display: none;
    align-items: center;
    gap: 12px;
    z-index: 1000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
  .install-prompt.show {
    display: flex;
  }
  .install-close {
    background: none;
    border: none;
    color: white;
    cursor: pointer;
    font-size: 18px;
  }

  /* Context Menu */
  .context-menu {
    position: fixed;
    background: var(--card-dark);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    padding: 8px;
    z-index: 1000;
    display: none;
    min-width: 150px;
  }
  .context-menu.show {
    display: block;
  }
  .context-item {
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .context-item:hover {
    background: rgba(255,255,255,0.05);
  }
  .context-item.danger {
    color: #ef4444;
  }

  /* Video Popup Overlay - Google Drive Style */
  .video-popup {
    display: none;
    position: fixed;
    z-index: 9999;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  /* When visible */
  .video-popup.show {
    display: flex;
    opacity: 1;
  }

  /* Popup content area */
  .video-popup-content {
    position: relative;
    background: #000;
    padding: 0;
    border-radius: 12px;
    max-width: 90%;
    max-height: 90%;
    width: auto;
    height: auto;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.8);
    transform: scale(0.9);
    transition: transform 0.3s ease;
  }

  /* Scale up slightly when visible */
  .video-popup.show .video-popup-content {
    transform: scale(1);
  }

  /* Video inside popup */
  .video-popup-content video {
    width: 100%;
    height: auto;
    max-height: 85vh;
    border-radius: 12px;
    display: block;
  }

  /* Close button */
  .close-popup {
    position: absolute;
    top: -40px;
    right: 0;
    color: #fff;
    font-size: 36px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.2s;
    z-index: 10000;
    background: none;
    border: none;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .close-popup:hover {
    color: #ff6b6b;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
  }

  /* Root Folder Special Styling */
  .root-folder-option {
    color: var(--root-folder-color);
    font-weight: 600;
    border-left: 3px solid var(--root-folder-color);
    padding-left: 12px;
    margin: 8px 0;
    transition: all 0.3s ease;
  }

  .root-folder-option:hover {
    color: var(--root-folder-hover);
    background: rgba(16, 185, 129, 0.1);
    border-left-color: var(--root-folder-hover);
  }

  /* Local Folder Import Styles */
  .local-folder-input {
    display: none;
  }

  /* NEW: Folder Delete Button Styles */
  .folder-delete-btn {
    background: none;
    border: none;
    color: #ef4444;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    font-size: 12px;
    opacity: 0.7;
    transition: all 0.2s;
  }

  .folder-delete-btn:hover {
    background: rgba(239, 68, 68, 0.1);
    opacity: 1;
    transform: scale(1.1);
  }

  /* Twitter Video Preview Styles */
  .twitter-preview {
    margin-top: 12px;
    padding: 12px;
    background: rgba(255,255,255,0.02);
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.04);
    display: none;
  }
  
  .twitter-preview.show {
    display: block;
  }
  
  .twitter-video-preview {
    width: 100%;
    max-width: 400px;
    border-radius: 8px;
    margin-bottom: 8px;
  }
  
  .twitter-video-info {
    font-size: 12px;
    color: var(--muted);
    margin-bottom: 8px;
  }
  
  .twitter-download-options {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  .twitter-download-btn {
    padding: 8px;
    background: var(--accent);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s;
  }
  
  .twitter-download-btn:hover {
    background: var(--accent-hover);
  }

  /* Enhanced mobile styles */
  @media (max-width:768px){
    .container{min-height:calc(100vh - 120px);margin-bottom:70px}
    .mobile-controls{display:block}
    .desktop-controls{display:none}
    .folders, .videoList{max-height:30vh}
    .fields{flex-direction:column}
    .fields input,.fields textarea,.fields select{min-width:auto}
    .viewer video{max-height:50vh}
    .thumb{width:80px;height:48px}
    
    /* Better touch targets for mobile */
    .vitem, .folder, .folder-header{padding:12px 10px;min-height:48px}
    .btn, .ghost{min-height:44px;display:flex;align-items:center;justify-content:center}
    
    /* Improved mobile header */
    header{padding:10px 12px}
    h1{font-size:16px}
    
    /* Better mobile controls layout */
    .mobile-controls-grid{grid-template-columns:1fr 1fr;gap:8px}
    
    /* Mobile auth styles */
    .auth-card{padding:24px;margin:20px}
    .auth-container{padding:20px 0}

    /* Mobile video controls */
    .video-controls {
      opacity: 1;
      padding: 12px;
    }
    .control-btn {
      font-size: 18px;
      padding: 6px;
    }

    /* Mobile conversion tools */
    .conversion-options {
      grid-template-columns: 1fr;
    }

    /* Mobile popup adjustments */
    .video-popup-content {
      max-width: 95%;
      max-height: 80%;
    }
    .close-popup {
      top: -35px;
      right: -5px;
      font-size: 30px;
    }

    /* Mobile folder actions */
    .folder-actions-menu {
      gap: 2px;
    }

    /* Mobile Twitter preview */
    .twitter-video-preview {
      max-width: 100%;
    }
  }
  
  @media (max-width:480px){
    header{padding:8px 12px}
    .container{padding-bottom:80px}
    .sidebar, .main{padding:8px}
    .mobile-controls{padding:10px}
    .mobile-controls-grid{grid-template-columns:1fr 1fr;gap:6px}
    .action-buttons .btn,.action-buttons .ghost{font-size:14px}
    
    /* Even smaller touch targets for very small screens */
    .vitem, .folder, .folder-header{padding:10px 8px;min-height:44px}
    .btn, .ghost{min-height:40px;font-size:14px}
    
    /* Adjust folder creation layout for mobile */
    .folder-input-row, .folder-select-row {
      flex-direction: column;
    }
    
    .folder-input-row input, .folder-select-row select {
      width: 100%;
    }
  }

  /* Dark mode scrollbar */
  ::-webkit-scrollbar{width:6px}
  ::-webkit-scrollbar-track{background:transparent}
  ::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.2);border-radius:3px}
  ::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,0.3)}
  body.light ::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.2)}
  body.light ::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.3)}
</style>
</head>
<body>
  <!-- Auth Screen - ALWAYS VISIBLE initially -->
  <div id="authScreen">
    <div class="auth-container">
      <div class="auth-card">
        <div class="auth-logo">MediaTracker Pro</div>
        <div class="auth-subtitle">Your Ultimate Media Organizer</div>
        <form class="auth-form" id="authForm">
          <input type="password" id="authPassword" placeholder="Enter Access Password" required autocomplete="current-password">
          <button type="submit" class="auth-primary-btn">Access Library</button>
        </form>
        <div class="auth-error" id="authError">Incorrect password. Please try again.</div>
        <div class="auth-loading" id="authLoading">Authenticating...</div>
      </div>
    </div>
  </div>

  <!-- App Container - COMPLETELY HIDDEN until authenticated -->
  <div id="appContainer">
    <header>
      <h1>MediaTracker Pro</h1>
      <div class="controls desktop-controls">
        <button class="ghost" id="themeToggle">ðŸŒ“</button>
        <button class="btn" id="addMediaBtn">Add Media</button>
      </div>
    </header>

    <div class="container">
      <div class="sidebar">
        <div class="topbar">
          <input type="search" id="searchInput" placeholder="Search media...">
        </div>
        
        <!-- Folder Creation Section -->
        <div class="folder-creation">
          <div class="folder-input-row">
            <input type="text" id="newFolderName" placeholder="New folder name">
            <button class="btn" id="createFolderBtn">Create</button>
          </div>
          <div class="folder-select-row">
            <select id="parentFolderSelect">
              <option value="root" class="root-folder-option">Main Library</option>
            </select>
            <button class="btn btn-sm collapse" id="toggleFoldersBtn" title="Collapse/Expand All">âˆ’</button>
          </div>
        </div>

        <!-- Folders Section -->
        <div class="folders" id="foldersContainer"></div>

        <!-- Video List Section -->
        <div class="videoList" id="videoList"></div>
      </div>

      <div class="main">
        <div class="viewer" id="viewer">
          <div style="text-align:center;padding:40px 20px;color:var(--muted)">
            <div style="font-size:48px;margin-bottom:16px">ðŸ“±</div>
            <h3 style="margin:0 0 8px 0;color:inherit">No Media Selected</h3>
            <p style="margin:0;font-size:14px">Select a media file from the list to view details</p>
          </div>
        </div>

        <!-- Action Sections -->
        <div class="action-section">
          <h3>Add Media</h3>
          <div class="add-media-buttons">
            <button class="btn" id="uploadMediaBtn">Upload Files</button>
            <input type="file" id="fileInput" multiple accept="video/*,image/*" style="display:none">
            <button class="ghost" id="urlDownloaderBtn">URL Downloader</button>
          </div>
          
          <!-- URL Downloader Section -->
          <div class="url-downloader-section" id="urlDownloaderSection" style="display:none;margin-top:12px">
            <div class="url-input-group">
              <input type="url" id="mediaUrl" placeholder="Enter Twitter/X URL">
              <div class="url-downloader-dropdown">
                <button class="url-downloader-btn" id="urlDownloaderDropdownBtn">
                  <span>Select Platform</span>
                  <span>â–¼</span>
                </button>
                <div class="url-downloader-content" id="urlDownloaderDropdown">
                  <div class="url-option" data-platform="twitter">Twitter/X</div>
                </div>
              </div>
            </div>
            
            <!-- Twitter Video Preview -->
            <div class="twitter-preview" id="twitterPreview">
              <video class="twitter-video-preview" id="twitterVideoPreview" controls></video>
              <div class="twitter-video-info" id="twitterVideoInfo"></div>
              <div class="twitter-download-options" id="twitterDownloadOptions"></div>
            </div>
            
            <button class="url-download-btn" id="downloadFromUrlBtn">Fetch Media</button>
          </div>
        </div>

        <!-- File Tools Section -->
        <div class="action-section">
          <h3>File Tools</h3>
          <div class="file-tools-dropdown">
            <button class="file-tools-btn" id="fileToolsDropdownBtn">
              <span>Select Tool</span>
              <span>â–¼</span>
            </button>
            <div class="file-tools-content" id="fileToolsDropdown">
              <div class="file-tool-option" data-tool="rename">Rename File</div>
              <div class="file-tool-option" data-tool="convert">Convert Format</div>
              <div class="file-tool-option" data-tool="compress">Compress Media</div>
              <div class="file-tool-option" data-tool="metadata">Edit Metadata</div>
            </div>
          </div>
        </div>

        <!-- Sync Status -->
        <div class="sync-status">
          <div class="sync-indicator" id="syncIndicator"></div>
          <span id="syncStatusText">Ready</span>
        </div>
      </div>
    </div>

    <!-- Mobile Controls -->
    <div class="mobile-controls">
      <div class="mobile-controls-grid">
        <button class="btn" id="mobileAddMediaBtn">Add Media</button>
        <button class="ghost" id="mobileThemeToggle">Theme</button>
      </div>
    </div>

    <!-- Video Popup Overlay -->
    <div class="video-popup" id="videoPopup">
      <div class="video-popup-content">
        <button class="close-popup" id="closePopup">&times;</button>
        <video id="popupVideo" controls></video>
      </div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyC4mZx_VYFgYZT2Y9c-mf4x6YqM6N4t5k0",
      authDomain: "mediatracker-pro.firebaseapp.com",
      projectId: "mediatracker-pro",
      storageBucket: "mediatracker-pro.firebasestorage.app",
      messagingSenderId: "123456789",
      appId: "1:123456789:web:abcdef123456"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const storage = firebase.storage();
    const auth = firebase.auth();

    // Authentication state management
    const AUTH_PASSWORD = "admin123"; // Default password - change this in production
    let isAuthenticated = false;

    // DOM Elements
    const authScreen = document.getElementById('authScreen');
    const appContainer = document.getElementById('appContainer');
    const authForm = document.getElementById('authForm');
    const authPassword = document.getElementById('authPassword');
    const authError = document.getElementById('authError');
    const authLoading = document.getElementById('authLoading');

    // Authentication function
    function authenticate(password) {
      return password === AUTH_PASSWORD;
    }

    // Handle auth form submission
    authForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const password = authPassword.value.trim();
      
      authLoading.style.display = 'block';
      authError.style.display = 'none';

      // Simulate authentication delay
      setTimeout(() => {
        if (authenticate(password)) {
          isAuthenticated = true;
          authScreen.classList.add('authenticated');
          appContainer.classList.add('authenticated');
          // Initialize app after successful auth
          initializeApp();
        } else {
          authError.style.display = 'block';
          authPassword.value = '';
          authPassword.focus();
        }
        authLoading.style.display = 'none';
      }, 800);
    });

    // Check if user was previously authenticated (basic session persistence)
    window.addEventListener('load', () => {
      const savedAuth = localStorage.getItem('mediatracker_authenticated');
      if (savedAuth === 'true') {
        isAuthenticated = true;
        authScreen.classList.add('authenticated');
        appContainer.classList.add('authenticated');
        initializeApp();
      }
    });

    // Initialize app after authentication
    function initializeApp() {
      localStorage.setItem('mediatracker_authenticated', 'true');
      
      // Your existing app initialization code here
      // ... (rest of your existing Firebase and app initialization code)
      
      // Initialize URL downloader
      initializeUrlDownloader();
    }

    // Initialize URL Downloader functionality
    function initializeUrlDownloader() {
      const urlDownloaderBtn = document.getElementById('urlDownloaderBtn');
      const urlDownloaderSection = document.getElementById('urlDownloaderSection');
      const urlDownloaderDropdownBtn = document.getElementById('urlDownloaderDropdownBtn');
      const urlDownloaderDropdown = document.getElementById('urlDownloaderDropdown');
      const downloadFromUrlBtn = document.getElementById('downloadFromUrlBtn');
      const mediaUrlInput = document.getElementById('mediaUrl');
      const twitterPreview = document.getElementById('twitterPreview');
      const twitterVideoPreview = document.getElementById('twitterVideoPreview');
      const twitterVideoInfo = document.getElementById('twitterVideoInfo');
      const twitterDownloadOptions = document.getElementById('twitterDownloadOptions');

      let selectedPlatform = 'twitter';

      // Toggle URL downloader section
      urlDownloaderBtn.addEventListener('click', () => {
        const isVisible = urlDownloaderSection.style.display !== 'none';
        urlDownloaderSection.style.display = isVisible ? 'none' : 'block';
      });

      // Platform dropdown toggle
      urlDownloaderDropdownBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        urlDownloaderDropdown.classList.toggle('show');
      });

      // Close dropdown when clicking outside
      document.addEventListener('click', () => {
        urlDownloaderDropdown.classList.remove('show');
      });

      // Platform selection
      urlDownloaderDropdown.addEventListener('click', (e) => {
        if (e.target.classList.contains('url-option')) {
          selectedPlatform = e.target.dataset.platform;
          urlDownloaderDropdownBtn.querySelector('span').textContent = e.target.textContent;
          urlDownloaderDropdown.classList.remove('show');
          twitterPreview.classList.remove('show');
        }
      });

      // Download from URL using FixTweet API
      downloadFromUrlBtn.addEventListener('click', async () => {
        const url = mediaUrlInput.value.trim();
        if (!url) {
          alert('Please enter a URL');
          return;
        }

        if (selectedPlatform === 'twitter') {
          await fetchTwitterMedia(url);
        }
      });

      // Fetch Twitter media using FixTweet API
      async function fetchTwitterMedia(url) {
        try {
          downloadFromUrlBtn.textContent = 'Fetching...';
          downloadFromUrlBtn.disabled = true;

          // Use FixTweet API to get tweet information
          const apiUrl = `https://api.fxtwitter.com/status/${getTweetIdFromUrl(url)}`;
          const response = await fetch(apiUrl);
          
          if (!response.ok) {
            throw new Error('Failed to fetch tweet data');
          }

          const data = await response.json();
          
          if (!data || !data.tweet) {
            throw new Error('Invalid tweet data received');
          }

          // Display preview and download options
          displayTwitterMedia(data.tweet);

        } catch (error) {
          console.error('Error fetching Twitter media:', error);
          alert('Error fetching media: ' + error.message);
        } finally {
          downloadFromUrlBtn.textContent = 'Fetch Media';
          downloadFromUrlBtn.disabled = false;
        }
      }

      // Extract tweet ID from URL
      function getTweetIdFromUrl(url) {
        const match = url.match(/twitter\.com\/\w+\/status\/(\d+)/) || 
                     url.match(/x\.com\/\w+\/status\/(\d+)/);
        return match ? match[1] : null;
      }

      // Display Twitter media preview and download options
      function displayTwitterMedia(tweet) {
        twitterPreview.classList.add('show');
        twitterVideoInfo.textContent = `Tweet by ${tweet.author.name} (@${tweet.author.screen_name})`;
        
        // Clear previous options
        twitterDownloadOptions.innerHTML = '';

        if (tweet.media && tweet.media.videos) {
          const videos = tweet.media.videos;
          
          // Find the highest quality video
          const highestQuality = videos.reduce((prev, current) => 
            (prev.bitrate > current.bitrate) ? prev : current
          );

          // Set video preview
          twitterVideoPreview.src = highestQuality.url;
          
          // Create download buttons for all available qualities
          videos.forEach(video => {
            const qualityLabel = getQualityLabel(video.bitrate, video.type);
            const button = document.createElement('button');
            button.className = 'twitter-download-btn';
            button.textContent = `Download ${qualityLabel}`;
            button.onclick = () => downloadTwitterVideo(video.url, tweet, qualityLabel);
            twitterDownloadOptions.appendChild(button);
          });
        } else if (tweet.media && tweet.media.photos) {
          // Handle photos
          twitterVideoPreview.style.display = 'none';
          twitterVideoInfo.textContent += ' - Photo tweet';
          
          tweet.media.photos.forEach((photo, index) => {
            const button = document.createElement('button');
            button.className = 'twitter-download-btn';
            button.textContent = `Download Photo ${index + 1}`;
            button.onclick = () => downloadTwitterPhoto(photo.url, tweet, index);
            twitterDownloadOptions.appendChild(button);
          });
        } else {
          twitterPreview.classList.remove('show');
          alert('No media found in this tweet');
        }
      }

      // Get quality label from bitrate
      function getQualityLabel(bitrate, type) {
        if (bitrate > 2000000) return 'HD';
        if (bitrate > 1000000) return 'Medium';
        return 'Standard';
      }

      // Download Twitter video
      async function downloadTwitterVideo(videoUrl, tweet, quality) {
        try {
          const response = await fetch(videoUrl);
          const blob = await response.blob();
          
          // Create a filename
          const filename = `twitter_${tweet.author.screen_name}_${tweet.id}_${quality}.mp4`;
          
          // Save to Firebase Storage and Firestore
          await saveMediaToStorage(blob, filename, 'video', tweet);
          
          alert('Video downloaded successfully!');
        } catch (error) {
          console.error('Error downloading video:', error);
          alert('Error downloading video: ' + error.message);
        }
      }

      // Download Twitter photo
      async function downloadTwitterPhoto(photoUrl, tweet, index) {
        try {
          const response = await fetch(photoUrl);
          const blob = await response.blob();
          
          // Create a filename
          const filename = `twitter_${tweet.author.screen_name}_${tweet.id}_photo_${index + 1}.jpg`;
          
          // Save to Firebase Storage and Firestore
          await saveMediaToStorage(blob, filename, 'image', tweet);
          
          alert('Photo downloaded successfully!');
        } catch (error) {
          console.error('Error downloading photo:', error);
          alert('Error downloading photo: ' + error.message);
        }
      }

      // Save media to Firebase Storage and Firestore
      async function saveMediaToStorage(blob, filename, type, tweet) {
        // Create storage reference
        const storageRef = storage.ref().child(`media/${filename}`);
        
        // Upload file
        const snapshot = await storageRef.put(blob);
        const downloadURL = await snapshot.ref.getDownloadURL();
        
        // Add to Firestore
        await db.collection('media').add({
          name: filename,
          url: downloadURL,
          type: type,
          size: blob.size,
          timestamp: firebase.firestore.FieldValue.serverTimestamp(),
          source: 'twitter',
          tweetData: {
            author: tweet.author.name,
            username: tweet.author.screen_name,
            tweetId: tweet.id,
            text: tweet.text
          },
          folderId: 'root' // Add to root folder by default
        });
        
        // Refresh the media list
        loadMedia();
      }
    }

    // Your existing Firebase and app initialization code continues here...
    // ... (rest of your existing code)

  </script>
</body>
</html>
[file content end]